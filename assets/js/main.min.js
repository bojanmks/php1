function ajaxCallback(e,a,t,o={}){$.ajax({url:e,method:a,data:o,dataType:"json",success:t,error:function(e){500==e.status?console.error(e.responseText):400!=e.status&&openModal(e.responseText)}})}function loadLocalStorage(e){let a=[];return null!=localStorage.getItem(e)&&(a=JSON.parse(localStorage.getItem(e))),a}function updateLocalStorage(e,a){localStorage.setItem(a,JSON.stringify(e))}function printCartNumber(){let e=loadLocalStorage("cart");var a=0;for(let t in e)a+=e[t].quantity;$("#cartNumber").html(a)}$(document).ready(function(){function e(e){$("body").append("<div id='loginModal'><div class='cover'><div id='loginContainer'><div id='loginModalContent'></div><button id='btnCloseLoginModal' class='font-medium'><i class='fas fa-times'></i></butotn></div></div></div>"),function e(t){let o;o="login"==t?"<h3 class='font-large textCenter'>Log in</h3><form class='font-small'><div class='formGroup'><label for='tbLoginEmail'>Email:</label><input type='email' id='tbLoginEmail' class='textField font-small' autocomplete='off'/><label class='errorMessage font-small'>examplename@example.com</label></div><div class='formGroup'><label for='tbLoginPassword'>Password:</label><input type='password' id='tbLoginPassword' class='textField font-small'/><label class='errorMessage font-small'>Your password must:<ul><li>- contain 1 lowercase letter</li><li>- contain 1 uppercase letter</li><li>- contain 1 number</li><li>- contain 1 special character</li><li>- be 8 characters or longer</li></ul></label></div><div class='formGroup'><button id='btnLoginSubmit' class='btnPrimary font-small'>Log in</button></div></form><a href='#' id='changeToRegister' class='font-small'>Not a user? Register here</a>":"<h3 class='font-large textCenter'>Register</h3><form class='font-small'><div class='formGroup'><label for='tbRegisterUsername'>Username:</label><input type='text' id='tbRegisterUsername' maxlength='20' class='textField font-small' autocomplete='off'/><label class='errorMessage font-small'>Your username must:<ul><li>- start with a letter</li><li>- be 5 characters or longer</li><li>- not contain special characters other than '_'</li></ul></label></div><div class='formGroup'><label for='tbRegisterEmail'>Email:</label><input type='email' id='tbRegisterEmail' class='textField font-small' autocomplete='off'/><label class='errorMessage font-small'>examplename@example.com</label></div><div class='formGroup'><label for='tbRegisterPassword'>Password:</label><input type='password' id='tbRegisterPassword' class='textField font-small'/><label class='errorMessage font-small'>Your password must:<ul><li>- contain 1 lowercase letter</li><li>- contain 1 uppercase letter</li><li>- contain 1 number</li><li>- contain 1 special character</li><li>- be 8 characters or longer</li></ul></label></div><div class='formGroup'><label for='tbRegisterRepeatPassword'>Repeat Password:</label><input type='password' id='tbRegisterRepeatPassword' class='textField font-small'/><label class='errorMessage font-small'>Passwords don't match</label></div><div class='formGroup'><button id='btnRegisterSubmit' class='btnPrimary font-small'>Register</button></div></form><a href='#' id='changeToLogin' class='font-small'>Already have an account? Log in</a>";$("#loginModalContent").html(o);$("#loginModalContent a").click(function(a){a.preventDefault(),"changeToRegister"==$(this).attr("id")?e("register"):e("login")});if("login"==t){var l=/^[a-z][a-z0-9-_\.]{2,}@([a-z0-9-_]{2,}\.)+[a-z]{2,}$/,s=$("#tbLoginEmail");function n(){checkRegExp(s,l)}s.blur(n);var i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,r=$("#tbLoginPassword");function c(){checkRegExp(r,i)}r.blur(c);var u=[n,c];$("#btnLoginSubmit").click(function(e){submitForm(u),noErrors&&ajaxCallback("assets/php/forms/login-form-validation.php","post",function(){location.reload()},{email:$("#tbLoginEmail").val(),password:$("#tbLoginPassword").val()}),e.preventDefault()})}else{var d=/^[a-zA-Z]\w{4,}$/,f=$("#tbRegisterUsername");function p(){checkRegExp(f,d)}f.blur(p);var m=/^[a-z][a-z0-9-_\.]{2,}@([a-z0-9-_]{2,}\.)+[a-z]{2,}$/,g=$("#tbRegisterEmail");function b(){checkRegExp(g,m)}g.blur(b);var v=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,h=$("#tbRegisterPassword");function R(){checkRegExp(h,v),""!=$("#tbRegisterRepeatPassword").val()&&x()}h.blur(R);var w=$("#tbRegisterRepeatPassword");function x(){$(h).hasClass("borderYellow")&&$(w).val()==$(h).val()?fieldCorrect(w):fieldIncorrect(w)}w.blur(x);var C=[b,R,x,p];$("#btnRegisterSubmit").click(function(e){submitForm(C),noErrors&&ajaxCallback("assets/php/forms/register-form-validation.php","post",function(e){clearForm($("#loginModalContent form")),a(),openModal(e.response)},{username:$("#tbRegisterUsername").val(),email:$("#tbRegisterEmail").val(),password:$("#tbRegisterPassword").val(),repeatPassword:$("#tbRegisterRepeatPassword").val()}),e.preventDefault()})}}(e),$("#loginModal .cover, #btnCloseLoginModal").mousedown(a),$("#loginContainer").mousedown(function(e){e.stopPropagation()}),$("#loginModal .cover, #loginContainer").hide(),$("#loginModal .cover").fadeIn("fast",function(){$("#loginContainer").fadeIn("fast")})}function a(){$("#loginContainer").fadeOut("fast",function(){$("#loginModal .cover").fadeOut("fast",function(){$("#loginModal").remove()})})}$(".btnLogin").click(function(e){e.preventDefault()}),$("#btnLogin").click(function(){e("login")}),$("#btnRegister").click(function(){e("register")}),function(){var e=location.pathname;e.match(/[(\.html)|(\.php)]$/)||(e="/index.php");e=e.substring(e.lastIndexOf("/")+1,e.length),$("#nav ul li a, #sideNavContent ul li a").each(function(){$this=$(this),-1!=$this.attr("href").indexOf(e)&&($this.addClass("active"),$this.click(function(e){e.preventDefault()}))})}(),$("#cart a").click(function(e){ajaxCallback("assets/php/cart-access.php","get",function(){location.href="cart.php"}),e.preventDefault()}),printCartNumber(),$("#sideNavContent").css("transition",`transform ${sideNavOpenDuration/1e3}s`),$("#sideNav").hide(),$("#hamburger a").click(function(e){$("#sideNav").fadeIn("fast",function(){$("#sideNavContent").css("transform","translateX(0px)")}),e.preventDefault()}),$("#sideNav .cover").click(closeSideNav),$("#sideNavContent").click(function(e){e.stopPropagation()}),$("body").append('<a href="#" id="toTop"><span class="arrow"></span></div>'),$("#toTop").click(function(e){$(document).scrollTop(0),e.preventDefault()}).hide(),$(document).scroll(function(){$(this).scrollTop()>=200?$("#toTop").fadeIn("fast"):$("#toTop").fadeOut("fast")}),$(".textField").keydown(function(e){13==e.keyCode&&e.preventDefault()}),$("#btnSubmitSurvey").click(function(e){e.preventDefault();let a=$(".rbSurvey:checked").val();a?ajaxCallback("assets/php/forms/survey-submition.php","get",function(){location.reload()},{rating:a}):openModal("Please choose one of the options.")}),$("#btnSurveyResults").click(function(){ajaxCallback("assets/php/pages/survey-results.php","get",function(e){openModal(e.response)})}),$("#btnCloseSurveyBar").click(function(){ajaxCallback("assets/php/close-survey-bar.php","get",function(){$("#survey").slideUp("fast",function(){$(this).remove()})})})});const sideNavOpenDuration=200;function closeSideNav(){$("#sideNavContent").css("transform","translateX(-100%)"),setTimeout(function(){$("#sideNav").fadeOut("fast")},sideNavOpenDuration)}